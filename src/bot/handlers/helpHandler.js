const logger = require('../../utils/logger');

/**
 * Handle the /help command
 * @param {TelegramBot} bot - Telegram bot instance
 * @param {Object} msg - Message object from Telegram
 * @param {string} command - Specific command to show help for (optional)
 */
async function handleHelp(bot, msg, command) {
  const chatId = msg.chat.id;
  
  try {
    if (command) {
      // Show help for specific command
      await showCommandHelp(bot, chatId, command);
    } else {
      // Show general help
      await showGeneralHelp(bot, chatId);
    }
    
    logger.info(`Showed help to user ${msg.from.id}${command ? ` for command ${command}` : ''}`);
  } catch (error) {
    logger.error(`Error showing help: ${error.message}`);
    await bot.sendMessage(
      chatId,
      '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å–ø—Ä–∞–≤–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'
    );
  }
}

/**
 * Show general help message
 * @param {TelegramBot} bot - Telegram bot instance
 * @param {number} chatId - Chat ID to send message to
 */
async function showGeneralHelp(bot, chatId) {
  const helpText = `
üìö *–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º NanoPredictBot*

*–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*
‚Ä¢ \`/start\` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
‚Ä¢ \`/predict\` - –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞–Ω–æ—á–∞—Å—Ç–∏—Ü
‚Ä¢ \`/add_result ID\` - –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
‚Ä¢ \`/history [N]\` - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: N –ø–æ—Å–ª–µ–¥–Ω–∏—Ö)
‚Ä¢ \`/plot –ø–∞—Ä–∞–º–µ—Ç—Ä [ID]\` - –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
‚Ä¢ \`/plot_correlation\` - –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚Ä¢ \`/export_csv\` - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ CSV-—Ñ–∞–π–ª
‚Ä¢ \`/feedback —Ç–µ–∫—Å—Ç\` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
‚Ä¢ \`/help [–∫–æ–º–∞–Ω–¥–∞]\` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ)

*–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è /plot:*
‚Ä¢ \`eu\` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è Eu
‚Ä¢ \`phen\` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –§–µ–Ω–∞–Ω—Ç—Ä–æ–ª–∏–Ω–∞
‚Ä¢ \`lig\` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –õ–∏–≥–∞–Ω–¥–∞
‚Ä¢ \`ligtype\` - –í–∏–¥ –ª–∏–≥–∞–Ω–¥–∞
‚Ä¢ \`ph\` - pH BSA
‚Ä¢ \`vol\` - –û–±—ä–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
‚Ä¢ \`time\` - –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
‚Ä¢ \`rate\` - –°–∫–æ—Ä–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

*–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*
‚Ä¢ \`/admin user add ID –∏–º—è\` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
‚Ä¢ \`/admin user remove ID\` - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞
‚Ä¢ \`/admin user list\` - –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ
‚Ä¢ \`/admin model list\` - –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢ \`/admin model reload –ø—É—Ç—å_–∫_size_model –ø—É—Ç—å_–∫_pdi_model\` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
‚Ä¢ \`/admin backup create\` - –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ \`/admin backup list\` - –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
‚Ä¢ \`/admin backup restore ID\` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
‚Ä¢ \`/admin logs —É—Ä–æ–≤–µ–Ω—å [N]\` - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: N –∑–∞–ø–∏—Å–µ–π)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
\`/help –∫–æ–º–∞–Ω–¥–∞\` (–Ω–∞–ø—Ä–∏–º–µ—Ä: \`/help predict\`)
`;
  
  await bot.sendMessage(chatId, helpText, { parse_mode: 'Markdown' });
}

/**
 * Show help for a specific command
 * @param {TelegramBot} bot - Telegram bot instance
 * @param {number} chatId - Chat ID to send message to
 * @param {string} command - Command to show help for
 */
async function showCommandHelp(bot, chatId, command) {
  // Remove leading slash if present
  const cmd = command.startsWith('/') ? command.substring(1) : command;
  
  let helpText;
  
  switch (cmd.toLowerCase()) {
    case 'start':
      helpText = `
üöÄ *–ö–æ–º–∞–Ω–¥–∞ /start*

–ù–∞—á–∏–Ω–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–æ—Ç–æ–º. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –≤–∞—à Telegram ID –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/start\`

*–†–µ–∑—É–ª—å—Ç–∞—Ç:*
‚Ä¢ –ï—Å–ª–∏ –≤—ã –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ: –ë–æ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—Å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
‚Ä¢ –ï—Å–ª–∏ –≤–∞—Å –Ω–µ—Ç –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ: –ë–æ—Ç —Å–æ–æ–±—â–∞–µ—Ç –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
‚Ä¢ –≠—Ç—É –∫–æ–º–∞–Ω–¥—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
`;
      break;
      
    case 'predict':
      helpText = `
üß™ *–ö–æ–º–∞–Ω–¥–∞ /predict*

–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –Ω–∞–Ω–æ—á–∞—Å—Ç–∏—Ü –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∏–Ω—Ç–µ–∑–∞.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/predict\`

*–ü—Ä–æ—Ü–µ—Å—Å:*
1. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–≤–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∏–Ω—Ç–µ–∑–∞ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª
2. –í—ã –≤–≤–æ–¥–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
3. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤–∞–º

*–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:*
\`–ö–æ–Ω—Ü.Eu –ö–æ–Ω—Ü.–§–µ–Ω–∞–Ω—Ç—Ä–æ–ª–∏–Ω–∞ –ö–æ–Ω—Ü.–õ–∏–≥–∞–Ω–¥–∞ –í–∏–¥_–ª–∏–≥–∞–Ω–¥–∞ pH_BSA –û–±—ä–µ–º_–¥–æ–± –í—Ä–µ–º—è_–¥–æ–± [–°–∫–æ—Ä–æ—Å—Ç—å_–¥–æ–±]\`

*–ü—Ä–∏–º–µ—Ä –≤–≤–æ–¥–∞:*
\`1 1 3 2 11 500 30\`
\`2 2 6 1 9 340 34 10\`

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å (–±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚Ä¢ –î–ª—è –≤–∏–¥–∞ –ª–∏–≥–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥—ã: 0 (–Ω–µ—Ç), 1 (–∫–∏—Å–ª–æ—Ç–∞), 2 (—ç—Ñ–∏—Ä), 3 (–Ω–∞—Ñ—Ç–∏–ª)
‚Ä¢ pH BSA –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º –æ—Ç 7 –¥–æ 11
‚Ä¢ –í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏
`;
      break;
      
    case 'add_result':
      helpText = `
üìä *–ö–æ–º–∞–Ω–¥–∞ /add_result*

–ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/add_result ID_—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞\`

*–ü—Ä–æ—Ü–µ—Å—Å:*
1. –ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. –í–∞—Å –ø—Ä–æ—Å—è—Ç –≤–≤–µ—Å—Ç–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä —á–∞—Å—Ç–∏—Ü (–Ω–º)
3. –ó–∞—Ç–µ–º –≤–∞—Å –ø—Ä–æ—Å—è—Ç –≤–≤–µ—Å—Ç–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π PdI
4. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º

*–ü—Ä–∏–º–µ—Ä:*
\`/add_result 550e8400-e29b-41d4-a716-446655440000\`

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ ID —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º –∏–ª–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ (/history)
‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã
‚Ä¢ –†–∞–∑–º–µ—Ä —á–∞—Å—Ç–∏—Ü –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
‚Ä¢ PdI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
`;
      break;
      
    case 'history':
      helpText = `
üìö *–ö–æ–º–∞–Ω–¥–∞ /history*

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/history [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]\`

*–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:*
‚Ä¢ \`–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ\` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –ø–æ–∫–∞–∑–∞—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)

*–ü—Ä–∏–º–µ—Ä—ã:*
\`/history\` - –ø–æ–∫–∞–∑–∞—Ç—å 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
\`/history 5\` - –ø–æ–∫–∞–∑–∞—Ç—å 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

*–í—ã–≤–æ–¥–∏–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:*
‚Ä¢ ID —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
‚Ä¢ –î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
‚Ä¢ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Ä–∞–∑–º–µ—Ä, PdI)
‚Ä¢ –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã)
‚Ä¢ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º –∏ —Ñ–∞–∫—Ç–æ–º (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
‚Ä¢ –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /add_result
`;
      break;
      
    case 'plot':
      helpText = `
üìà *–ö–æ–º–∞–Ω–¥–∞ /plot*

–°—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –Ω–∞–Ω–æ—á–∞—Å—Ç–∏—Ü –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–∏–Ω—Ç–µ–∑–∞.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/plot –ø–∞—Ä–∞–º–µ—Ç—Ä [ID_—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞_–æ–ø–æ—Ä–Ω–æ–≥–æ]\`

*–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:*
‚Ä¢ \`–ø–∞—Ä–∞–º–µ—Ç—Ä\` - –∫–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è –æ—Å–∏ X (—Å–º. —Å–ø–∏—Å–æ–∫ –Ω–∏–∂–µ)
‚Ä¢ \`ID_—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞_–æ–ø–æ—Ä–Ω–æ–≥–æ\` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - ID —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ

*–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:*
‚Ä¢ \`eu\` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è Eu (–º–ú/–ª)
‚Ä¢ \`phen\` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –§–µ–Ω–∞–Ω—Ç—Ä–æ–ª–∏–Ω–∞ (–º–ú/–ª)
‚Ä¢ \`lig\` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –õ–∏–≥–∞–Ω–¥–∞ (–º–ú/–ª)
‚Ä¢ \`ligtype\` - –í–∏–¥ –ª–∏–≥–∞–Ω–¥–∞
‚Ä¢ \`ph\` - pH BSA
‚Ä¢ \`vol\` - –û–±—ä–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–º–ª)
‚Ä¢ \`time\` - –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–º–∏–Ω)
‚Ä¢ \`rate\` - –°–∫–æ—Ä–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–º–ª/–º–∏–Ω)

*–ü—Ä–∏–º–µ—Ä—ã:*
\`/plot ph\` - –≥—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç pH BSA
\`/plot eu 550e8400-e29b-41d4-a716-446655440000\` - –≥—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ Eu —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –ù–∞ –≥—Ä–∞—Ñ–∏–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ä–∞–∑–º–µ—Ä —á–∞—Å—Ç–∏—Ü –∏ PdI (—É–º–Ω–æ–∂–µ–Ω–Ω—ã–π –Ω–∞ 100 –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏)
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å–µ –≤–∞—à–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
‚Ä¢ –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω ID –æ–ø–æ—Ä–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –æ–Ω –±—É–¥–µ—Ç –≤—ã–¥–µ–ª–µ–Ω –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
`;
      break;
      
    case 'plot_correlation':
      helpText = `
üî• *–ö–æ–º–∞–Ω–¥–∞ /plot_correlation*

–°—Ç—Ä–æ–∏—Ç —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–∏–Ω—Ç–µ–∑–∞ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –Ω–∞–Ω–æ—á–∞—Å—Ç–∏—Ü.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/plot_correlation\`

*–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:*
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –º–∏–Ω–∏–º—É–º 5 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã

*–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:*
‚Ä¢ –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç: —Å–∏–ª—å–Ω–∞—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è (+1)
‚Ä¢ –°–∏–Ω–∏–π —Ü–≤–µ—Ç: —Å–∏–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è (-1)
‚Ä¢ –ë–µ–ª—ã–π —Ü–≤–µ—Ç: –Ω–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ (0)

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –≤–∞—à–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
‚Ä¢ –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—É –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
‚Ä¢ –°–∏–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—É—é —Å–≤—è–∑—å
`;
      break;
      
    case 'export_csv':
      helpText = `
üìã *–ö–æ–º–∞–Ω–¥–∞ /export_csv*

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –≤–∞—à–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –≤ CSV-—Ñ–∞–π–ª –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/export_csv\`

*–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:*
‚Ä¢ ID —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
‚Ä¢ –î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
‚Ä¢ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ç–µ–∑–∞
‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Ä–∞–∑–º–µ—Ä, PdI)
‚Ä¢ –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã)
‚Ä¢ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º –∏ —Ñ–∞–∫—Ç–æ–º (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –§–∞–π–ª –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ Excel, Google Sheets –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
‚Ä¢ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º
‚Ä¢ CSV-—Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–ø—è—Ç—É—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
`;
      break;
      
    case 'feedback':
      helpText = `
üì¨ *–ö–æ–º–∞–Ω–¥–∞ /feedback*

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –±–æ—Ç–∞.

*–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*
\`/feedback —Ç–µ–∫—Å—Ç_—Å–æ–æ–±—â–µ–Ω–∏—è\`

*–ü—Ä–∏–º–µ—Ä:*
\`/feedback –ü—Ä–µ–¥–ª–∞–≥–∞—é –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ\`

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –±–æ—Ç–∞
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö, –ø–æ–∂–µ–ª–∞–Ω–∏—è—Ö –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö
‚Ä¢ –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –¥–∞–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
`;
      break;
      
    case 'admin':
      helpText = `
üëë *–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã*

–ù–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

*–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:*
‚Ä¢ \`/admin user add ID –∏–º—è\` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
‚Ä¢ \`/admin user remove ID\` - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞
‚Ä¢ \`/admin user list\` - –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ

*–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏:*
‚Ä¢ \`/admin model list\` - –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢ \`/admin model reload –ø—É—Ç—å_–∫_size_model –ø—É—Ç—å_–∫_pdi_model\` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏

*–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:*
‚Ä¢ \`/admin backup create\` - –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ \`/admin backup list\` - –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
‚Ä¢ \`/admin backup restore ID\` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

*–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:*
‚Ä¢ \`/admin logs —É—Ä–æ–≤–µ–Ω—å [N]\` - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
  - \`—É—Ä–æ–≤–µ–Ω—å\`: error, warning, info, debug
  - \`N\` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)

*–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:*
‚Ä¢ –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚Ä¢ –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
  \`/help admin user add\`, \`/help admin backup create\` –∏ —Ç.–¥.
`;
      break;
      
    default:
      helpText = `
‚ùì *–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–µ "${command}"*

–ö–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –Ω–µ–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
\`/help\`
`;
  }
  
  await bot.sendMessage(chatId, helpText, { parse_mode: 'Markdown' });
}

module.exports = {
  handleHelp
};